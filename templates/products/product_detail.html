{% extends 'base/base.html' %}

{% block title %}{{ product.name }} - E-Shop{% endblock %}

{% block content %}
<div class="container" style="padding-top: 1rem;">
    <a href="{% url 'products:list' %}" style="color: #666; font-size: 0.9rem;">&larr; Retour aux produits</a>
</div>

<div class="product-detail">
    <div class="product-image">
        {% if product.image_url %}
        <img src="{{ product.image_url }}" alt="{{ product.name }}">
        {% else %}
        <div
            style="background: #eee; height: 400px; display: flex; align-items: center; justify-content: center; color: #aaa; border-radius: 8px;">
            No Image Available
        </div>
        {% endif %}
    </div>

    <div class="product-info">
        <h1 style="margin-top: 0;">{{ product.name }}</h1>
        <p class="price">{{ product.price }} â‚¬</p>

        <div style="margin: 1.5rem 0; padding: 1rem; background: #f9f9f9; border-radius: 8px;">
            <p class="description" style="margin-bottom: 0;">{{ product.description }}</p>
        </div>

        <div style="margin-top: auto;">
            {% if product.stock > 0 %}
            <p class="stock" style="color: #27ae60; font-weight: bold; margin-bottom: 1rem;">
                <span
                    style="display: inline-block; width: 10px; height: 10px; background: #27ae60; border-radius: 50%; margin-right: 5px;"></span>
                En stock ({{ product.stock }})
            </p>
            <form action="{% url 'cart:add_to_cart' product.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary" style="width: 100%; font-size: 1.1rem; padding: 1rem;">
                    Ajouter au panier
                </button>
            </form>
            {% else %}
            <p class="stock" style="color: #e74c3c; font-weight: bold;">Rupture de stock</p>
            <button disabled className="btn"
                style="width: 100%; background: #ccc; cursor: not-allowed; padding: 1rem;">Indisponible</button>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}